/* ===========================
   style.css — versión adaptada
   Entra como último CSS para ganar prioridad
   =========================== */

/* ---------- Tema & tokens ---------- */
:root {
  --fondo-color: #262626;
  --fondo-imagen: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAWgAAAFoCAQAAADQ7KleAAAACXBIWXMAAAsSAAALEgHS3X78AAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAA+4SURBVHja7J1dbBxX...'); /* recortado por brevedad */
  --fondo-imagen-claro: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAWgAAAFoCAQAAADQ7KleAAAACXBIWXMAAAsSAAALEgHS3X78AAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAABJRSURBVHja7J17jFzVfY...'); /* recortado por brevedad */

  --color-principal: #00c3ff;
  --color-luz: #00c3ffcc;
  --color-fondo-luz: #00c3ff0d;
  --color-error: #ff0000;

  /* tokens extra para estética Jarvis */
  --outline: 2px;
  --radius: 10px;
  --radius-lg: 16px;
  --shadow-soft: 0 0 8px var(--color-luz);
  --shadow-strong: 0 0 20px var(--color-principal);
  --panel-bg: #0e0e0e;
  --panel-bd: #21313a;
  --text: #e7f0f3;
  --subtext: #a9b3c1;
  --speed: 260ms;
}

/* ---------- Base ---------- */
html, body {
  margin: 0;
  height: 100%;
  padding: 0;
  background-color: var(--fondo-color);
  font-family: 'Consolas', 'Courier New', monospace;
  color: var(--color-principal);
  overflow-x: hidden;
  overflow-y: auto;
}

body {
  display: flex;
  flex-direction: column;
  align-items: center;
  min-height: 100vh;
  background-image: var(--fondo-imagen);
  background-size: cover;
  background-repeat: no-repeat;
  background-attachment: fixed;
  background-position: center;
}

#appContent {
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  padding-top: 60px; /* para no tapar top-bar fija */
}

/* Modo claro: cambia imagen + fondo */
body.light-mode {
  --fondo-color: #f3f3f3;
  --fondo-imagen: var(--fondo-imagen-claro);
  background-color: var(--fondo-color);
  background-image: var(--fondo-imagen);
}

/* ---------- Títulos ---------- */
h1, h2 {
  text-align: center;
  font-size: 2rem;
  margin-bottom: 30px;
  text-shadow: 0 0 8px var(--color-principal);
}
h1 { color: var(--color-principal); }
h2 { color: #ffffff; }

/* ---------- Contenedores & menú ---------- */
#mainMenu {
  margin: auto;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1rem;
}

/* Pantallas de menú intercambiables (p.ej. inicial / contraseña) */
.menu-screen {
  display: none;
  flex-direction: column;
  align-items: center;
  gap: 1rem;
}
.menu-screen.is-active {
  display: flex;
  animation: holographic-fade 0.4s ease-out;
}

/* ---------- Botonera ---------- */
.button-container {
  display: flex;
  flex-direction: column;
  gap: 20px;
  width: 100%;
  max-width: 400px;
  padding: 0 20px;
  z-index: 1;
}

/* Botones base + look Jarvis */
button,
.btn,
[role="button"] {
  background: transparent;
  border: var(--outline) solid var(--color-principal);
  color: var(--color-principal);
  font-size: 1rem;
  padding: 12px;
  width: 100%;
  box-sizing: border-box;
  border-radius: var(--radius);
  cursor: pointer;
  transition: transform var(--speed) ease, box-shadow var(--speed) ease, background var(--speed) ease, color var(--speed) ease, border-color var(--speed) ease;
  box-shadow: var(--shadow-soft);
  will-change: transform, box-shadow;
}
button:hover,
.btn:hover,
[role="button"]:hover {
  background-color: var(--color-principal);
  color: #222222;
  box-shadow: 0 0 15px var(--color-principal);
  transform: translateY(-1px);
}
button:active { transform: translateY(0); }

/* Variante “ramas” Correcta/Incorrecta */
button.branch-btn{
  position: relative;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  gap: .75rem;
  width: 100%;
  padding: 12px 16px;
  border-radius: var(--radius);
  border: var(--outline) solid var(--color-principal);
  background: transparent;
  color: var(--color-principal);
  box-shadow: var(--shadow-soft);
  transition: background .25s ease, box-shadow .25s ease, transform .06s ease;
  overflow: hidden;
}
.branch-btn .label{ pointer-events: none; }
button.branch-btn::after{
  content: ">";
  position: absolute; inset: 0 0 0 auto;
  height: 100%; width: 58px;
  display: flex; align-items: center; justify-content: center;
  font-weight: 700;
  background: #0a0a0a;
  border-left: var(--outline) solid var(--color-principal);
  color: #111;
  text-shadow: none;
  transition: background .25s ease, box-shadow .25s ease, border-left-color .25s ease;
}
button.branch-btn:hover{ box-shadow: 0 0 15px var(--color-principal); }
button.branch-btn.correcta::after{ background-color: #00ff00; border-left-color: #00ff00; }
button.branch-btn.incorrecta::after{ background-color: #ff0000; border-left-color: #ff0000; }
button.branch-btn.correcta:hover{ background: rgba(0,255,0,.15); box-shadow: 0 0 15px #00ff00; }
button.branch-btn.incorrecta:hover{ background: rgba(255,0,0,.15); box-shadow: 0 0 15px #ff0000; }

/* ---------- Caja de respuestas ---------- */
.response-box {
  margin-top: 20px;
  font-size: 1.05rem;
  text-align: justify;
  color: #ffffffcc;
  padding: 10px;
  z-index: 1;
}

/* ---------- Footer ---------- */
.footer {
  position: relative;
  padding: 20px 0 60px;
  margin-top: 40px;
  text-align: center;
  width: 100%;
  color: #404040;
  background: transparent;
}
.footer img { max-height: 50px; margin-bottom: 10px; }

/* ---------- Botón flotante HOME ---------- */
.back-button {
  position: fixed;
  bottom: 20px; right: 20px;
  width: 55px; height: 55px;
  border: var(--outline) solid var(--color-principal);
  background: #292929;
  display: flex; align-items: center; justify-content: center;
  border-radius: var(--radius);
  cursor: pointer;
  box-shadow: var(--shadow-soft);
  transition: all var(--speed) ease;
  z-index: 999;
}
.back-button svg {
  fill: var(--color-principal);
  width: 24px; height: 24px;
  transition: fill var(--speed) ease;
}
.back-button:hover { background-color: var(--color-principal); }
.back-button:hover svg { fill: #222222; }

/* ---------- Barra superior con email + logout ---------- */
.top-bar {
  position: fixed;
  top: 10px; width: 100%;
  padding: 10px 20px;
  color: var(--color-principal);
  display: flex;
  flex-direction: row;
  background-color: rgba(0, 0, 0, 0.1);
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  gap: 0;
  z-index: 1000;
  margin-top: 10px;
  box-sizing: border-box;
}
.top-bar button { margin-top: 10px; }

#logoutBtn {
  background: transparent;
  color: var(--color-principal);
  border: var(--outline) solid var(--color-principal);
  padding: 4px 8px;
  font-size: 0.85rem;
  border-radius: 6px;
  max-width: 150px;
  white-space: nowrap;
  flex-shrink: 0;
  cursor: pointer;
}

/* ---------- Contenedor de login ---------- */
#loginContainer {
  margin-top: 100px;
  display: flex; flex-direction: column;
  align-items: center; justify-content: center;
}

/* ---------- Inputs “holográficos” (incluye password) ---------- */
input.response-box {
  background: transparent;
  border: var(--outline) solid var(--color-principal);
  color: var(--color-principal);
  padding: 10px 12px;
  border-radius: var(--radius);
  outline: none;
  font-size: 1rem;
  text-align: center;
  transition: all var(--speed) ease;
  box-shadow: var(--shadow-soft);
}
input.response-box::placeholder {
  color: var(--color-luz);
  text-align: center;
  opacity: .7;
}
input.response-box:focus {
  border-color: var(--color-principal);
  box-shadow: var(--shadow-strong);
  background: color-mix(in oklab, var(--color-principal) 7%, transparent);
}
input.response-box.error {
  border: var(--outline) solid var(--color-error);
  color: var(--color-error);
  box-shadow: 0 0 20px rgba(255, 68, 68, 0.8);
  background: rgba(255, 68, 68, 0.05);
}

/* Autofill Chrome/Edge en password */
input[type="password"].response-box:-webkit-autofill,
input[type="password"].response-box:-webkit-autofill:hover,
input[type="password"].response-box:-webkit-autofill:focus {
  -webkit-text-fill-color: var(--color-principal) !important;
  border: var(--outline) solid var(--color-principal) !important;
  -webkit-box-shadow: 0 0 0 1000px rgba(0, 255, 0, 0.08) inset !important;
  box-shadow: 0 0 0 1000px rgba(0, 255, 0, 0.08) inset !important;
  caret-color: var(--color-principal) !important;
  transition: background-color 9999s ease-out 0s;
}

/* ---------- Animaciones reutilizables ---------- */
@keyframes holographic-fade {
  0% { opacity: 0; filter: brightness(0.3) blur(2px); transform: scale(0.98); }
  100% { opacity: 1; filter: brightness(1) blur(0px); transform: scale(1); }
}
.holo-anim { animation: holographic-fade 0.4s ease-out; }

.fade-in { animation: fadeIn 0.4s ease-in-out; }
@keyframes fadeIn {
  0% { opacity: 0; transform: scale(0.95); }
  100% { opacity: 1; transform: scale(1); }
}

/* HUD suave (una sola definición, sin duplicar) */
@keyframes hudFade {
  0%   { opacity: 0; transform: scale(0.9);  filter: drop-shadow(0 0 8px var(--color-principal)); }
  30%  { opacity: 1; transform: scale(1.02); filter: drop-shadow(0 0 12px var(--color-principal)); }
  60%  { opacity: 1; transform: scale(1);    filter: drop-shadow(0 0 6px var(--color-principal)); }
  100% { opacity: 1; }
}
.hud-appear { animation: hudFade 0.4s ease-out; }

.flash { animation: flash 0.3s ease-in-out 2; }
@keyframes flash { 0%,100%{opacity:1;} 50%{opacity:0;} }

.shake { animation: shake 0.4s ease; }
@keyframes shake {
  10%, 90% { transform: translateX(-2px); }
  20%, 80% { transform: translateX(4px); }
  30%, 50%, 70% { transform: translateX(-8px); }
  40%, 60% { transform: translateX(8px); }
}

/* Respeta reduce-motion */
@media (prefers-reduced-motion: reduce) {
  * { animation: none !important; transition: none !important; }
}

/* ---------- Preloader (inicial) ---------- */
/* Si tu build ya trae #preloader, lo mantenemos oculto para no bloquear */
#preloader {
  display: none !important;
  visibility: hidden !important;
  pointer-events: none !important;
}

/* ---------- Loader post-login (overlay) ---------- */
/* Aparece cuando el body tiene .loading (disparado por JS tras login ok) */
.loader-overlay {
  position: fixed;
  inset: 0;
  background: radial-gradient(1200px 600px at 50% -20%, var(--color-fondo-luz) 0%, transparent 60%), rgba(0,0,0,.82);
  backdrop-filter: blur(2px);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}
body.loading .loader-overlay { display: flex; }

/* spinner circular */
.loader {
  width: 74px; height: 74px; border-radius: 50%;
  border: 3px solid color-mix(in oklab, var(--color-principal) 25%, transparent);
  border-top-color: var(--color-principal);
  animation: spin 900ms linear infinite;
  box-shadow: 0 0 24px color-mix(in oklab, var(--color-principal) 35%, transparent);
}
@keyframes spin { to { transform: rotate(360deg); } }

/* ---------- Barra de progreso (por si querés simular %) ---------- */
.loading-container {
  display: flex; flex-direction: column; align-items: flex-start;
  width: 300px; height: 50px; position: relative;
}
.percentage {
  position: absolute; top: -30px; left: 0;
  font-size: 1.2rem; color: var(--color-principal);
  text-shadow: 0 0 8px var(--color-principal);
}
.progress-bar {
  width: 100%; height: 12px;
  border: var(--outline) solid var(--color-principal);
  box-shadow: 0 0 10px var(--color-principal);
  background: rgba(0, 255, 104, 0.1);
  overflow: hidden;
}
.progress-fill {
  height: 100%; background: var(--color-principal);
  width: 0%; transition: width 0.2s ease-out;
  box-shadow: 0 0 10px var(--color-principal);
}

/* ---------- Modo claro: borde oscuro sutil ---------- */
body.light-mode h1,
body.light-mode h2,
body.light-mode button,
body.light-mode .response-box,
body.light-mode p,
body.light-mode .top-bar,
body.light-mode .footer {
  text-shadow: 1px 1px 2px #00000088;
}

/* ---------- Utilidades ---------- */
* { user-select: none; }

.grid-gap { display: grid; gap: 12px; }
.txt-dim { color: var(--subtext); }
.panel, .card, .box, section, .container {
  background: linear-gradient(180deg, var(--panel-bg), #0a0a0a);
  border: 1px solid var(--panel-bd);
  border-radius: var(--radius-lg);
  box-shadow: 0 8px 24px rgba(0,0,0,0.35);
}

/* ---------- Responsive ---------- */
@media (max-width: 600px) {
  html, body {
    width: 100vw; max-width: 100vw;
    overflow-x: hidden !important;
  }
  .button-container {
    padding: 0 20px !important;
    box-sizing: border-box;
    max-width: 100%; width: 100%;
    overflow-x: hidden;
  }
  h1 {
    font-size: 1.5rem;
    margin: 60px 10px 20px;
  }
  button, .btn, [role="button"] {
    font-size: 0.95rem;
    max-width: 100%;
    box-sizing: border-box;
    padding: 10px;
    width: 100%;
  }
  .footer { font-size: 0.85rem; padding-bottom: 60px; }
  .top-bar { top: 10px; right: 10px; flex-direction: column; align-items: flex-end; margin-top: 10px; }
}

/* ---------- Comentarios útiles ----------
1) Pantallas de menú:
   - Añadí la clase .menu-screen a tus contenedores de pantallas (p.ej. #mainMenu, #passwordMenu).
   - Activá la visible con .is-active (el CSS ya anima la entrada).

2) Loader post-login:
   - En tu HTML, agrega al final del <body>:
     <div class="loader-overlay" id="loginLoader" aria-hidden="true">
       <div class="loader" role="status" aria-label="Cargando"></div>
     </div>
   - En tu JS, cuando confirmes login OK:
     window.dispatchEvent(new Event('auth:login:success'));
   - Y agrega un listener sencillo (si no lo tenés):
     window.addEventListener('auth:login:success', () => {
       document.body.classList.add('loading');
       setTimeout(() => {
         document.body.classList.remove('loading');
         const el = document.getElementById('loginLoader');
         if (el) el.style.display = 'none';
       }, 1200);
     });

3) Carga del CSS:
   - En tu index.html, después de los otros CSS ya minificados:
     <link rel="stylesheet" href="assets/style.css">
--------------------------------------------- */
